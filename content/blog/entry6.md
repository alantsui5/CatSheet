---
title: C++å‡½æ•¸å¼ğŸ±ç´™(C++ functional Programming)
tags: C++
category: Programming Languages
excerpt: C++çš„å‡½æ•¸å¼ä»‹ç´¹
created: 2019-06-28
image: ./images/qingbao-meng-01_igFr7hd4-unsplash.jpg
image_caption: Photo by Qingbao Meng on Unsplash
author: author1
---

# **å‰è¨€ï¼šé¢å‘éç¨‹ç·¨ç¨‹çš„å®šç¾©**

é¢å‘éç¨‹æ˜¯ä¸€ç¨®ä»¥æ­¥é©Ÿç‚ºä¸­å¿ƒçš„ç·¨ç¨‹è¨­è¨ˆæ–¹æ³•ã€‚ç·¨ç¨‹çš„æ™‚å€™æŠŠè§£æ±ºå•é¡Œçš„æ­¥é©Ÿæ‹†åˆ†å‡ºä¾†ï¼Œä¸¦ç”¨å‡½æ•¸æŠŠé€™äº›æ­¥é©Ÿå¯¦ç¾å‡ºä¾†ï¼Œæˆ–è€…èªªåŒ…è£èµ·ä¾†ï¼Œä¾¿æ˜¯é¢å‘éç¨‹çš„æ„æ€äº†ã€‚é‚£éº¼ï¼Œå¦‚æœæˆ‘å€‘è¦ç”¨C++é€²è¡Œä¸€å€‹æœªçŸ¥æ•¸çš„å››å‰‡é‹ç®—ï¼Œé‚£éº¼è©²æ€éº¼æ‹†åˆ†æ­¥é©Ÿå‘¢ï¼Ÿ

1. å…ˆç•Œå®šæˆ‘å€‘è¦å°‹æ‰¾çš„range
2. æŠŠæ˜¨æ—¥çš„Codeå¯«é€²ä¾†
3. åˆ†é–‹ + - x Ã·å››ç¨®æƒ…æ³åšé‹ç®—
4. æŠŠé‹ç®—çµæœè¿”å›

ä½ æœƒç™¼ç¾éƒ½æ˜¯é †åºçš„çµæœ

# **å‡½æ•¸éœ€è¦æ¨™æ˜å‹åˆ¥çš„ï¼ï¼**

å¦‚æœå¿˜è¨˜äº†C++æœ‰ä»€éº¼é¡å‹å¯ä»¥æœƒç¬¬4å¤©çœ‹æœ€åº•çš„å°è¡¨æ ¼

# **å‡½æ•¸**

æˆ‘å‡è¨­å¤§å®¶éƒ½è½éæ•¸å­¸çš„å‡½æ•¸ï¼Œæ•¸å­¸çš„å‡½æ•¸è£¡çš„è¡¨ç¤ºæ˜¯é€™æ¨£çš„ï¼šÂ `sin(x)`Â ,Â `f(y)`,ä½ å¯ä»¥çœ‹è¦‹å‡½æ•¸æœ‰ä¸€å€‹åå­—ï¼Œè€Œåœ¨æ‹¬å¼§è£¡çš„å°±æ˜¯ä½ è¦å‚³å…¥çš„æ•¸å€¼ã€‚å¦‚æœè¦å®šç¾©ä¸€å€‹å‡½æ•¸åšä»€éº¼ï¼Œå’Œè¿”å›çš„æ•¸å€¼æ˜¯ä»€éº¼ã€‚é‚£éº¼å°±è¦ç”¨ä»¥ä¸‹çš„æ–¹æ³•ã€‚

æˆ‘å€‘å‡è¨­è¦åšä¸€å€‹ å«Â `add(x,y)`Â çš„å‡½æ•¸,ç•¶ä¸­æˆ‘å€‘å¸Œæœ›ä»–è¨ˆç®—å‡º x + y çš„ç¸½å’Œï¼Œé‚£éº¼å°±å¯ä»¥é€™æ¨£åšã€‚

    //return å°±æ˜¯æŠŠæˆ‘å€‘å¸Œæœ›è¦çš„ç­”æ¡ˆè¼¸å‡ºåˆ°ä¸»å‡½æ•¸è£¡

å¦‚æ­¤é¡æ¨ï¼Œæˆ‘å€‘å¯ä»¥å¾—å‡ºä»¥ä¸‹çš„å‡½æ•¸

    //return å°±æ˜¯æŠŠæˆ‘å€‘å¸Œæœ›è¦çš„ç­”æ¡ˆè¼¸å‡ºåˆ°ä¸»å‡½æ•¸è£¡//return å°±æ˜¯æŠŠæˆ‘å€‘å¸Œæœ›è¦çš„ç­”æ¡ˆè¼¸å‡ºåˆ°ä¸»å‡½æ•¸è£¡//return å°±æ˜¯æŠŠæˆ‘å€‘å¸Œæœ›è¦çš„ç­”æ¡ˆè¼¸å‡ºåˆ°ä¸»å‡½æ•¸è£¡

é‚£éº¼æˆ‘å€‘ä¸‹ä¸€æ­¥å°±æ˜¯æŸ¥è©¢æ•¸å¼ç©¶ç«Ÿæ˜¯ + - x Ã· äº†

    auto calculate(auto x, char operators, auto y){
    	switch(operators){
    		case '+': return sumOf(x,y); break;
    		case '-': return differenceOf(x,y); break;
    		case '*': return productOf(x,y); break;
    		case '/': return quotientOf(x,y); break;
    }

- æˆ‘å€‘ç¾åœ¨å°±å·²ç¶“å¼„äº†ä¸€å€‹æœ€åŸºæœ¬çš„Parser äº†

ç„¶å¾Œå†å¯«ä¸€å€‹å››å‰‡é©—ç®—å™¨ã€‚

    auto check(int x, char oeprators, int y, int z){
    	return calculate(x,operators,y) == z;
    }

- é€™å€‹é‹ç®—å™¨æœƒåœ¨ä¸‰å€‹æ•¸å€¼éƒ½æ­£ç¢ºçš„æ™‚å€™è¿”å›Â `true`ï¼Œåä¹‹Â `false`

ä¸‹ä¸€æ­¥ä¾¿æ˜¯å¯«å‡ºè¨ˆç®—çš„For Loopsäº†

    auto evaluateX(char operators, int y, int z){
    	for(auto x = 0; x < 1000 ;x++){
    		if(check(x,operators,y,z)) return static_cast<double>(x);
    		else if(check(-x,operators,y,z)) return static_cast<double>(x);
    		else continue;
    	}

é€™å€‹ç¨‹åºçš„ç¯„åœå¾-1000åˆ°1000ï¼Œèƒ½æ‡‰ä»˜ç°¡å–®çš„è¨ˆç®—,static_castæ‡‰ä»˜å°æ•¸çš„

é‚£æ€éº¼ä½¿ç”¨å‡½æ•¸å‘¢ï¼Ÿå…¶å¯¦ä¸Šé¢çš„å‡½æ•¸æœ‰ä¸å°‘éƒ½æœ‰ä½¿ç”¨å…¶ä»–å‡½æ•¸çš„ï¼Œè€Œä¸‹é¢å°±æ˜¯åœ¨Mainä¸­ä½¿ç”¨ã€‚

    //è¼¸å‡ºäº† 2//è¼¸å‡ºäº† 1.2//è¼¸å‡ºäº† 180

é€™æ¨£ï¼Œæˆ‘å€‘ä¸€å€‹ä¸¦ä¸æ˜¯å¾ˆFlexibleçš„ Functionå°±å®Œæˆå•¦ã€‚å›é¡§ä¸€ä¸‹å‡½æ•¸çµæ§‹

    -- evaluateX()
    ----check()
    --------calculate()
    ------------sumOf()
    ------------differenceOf()
    ------------quotientOf()
    ----check()
    --------calculate()
    ------------sumOf()
    ------------differenceOf()
    ------------quotientOf()

## Lambda å‡½æ•¸

å‡½æ•¸å¼æœ‰ä¸‰å€‹æ¦‚å¿µï¼Œåˆ†åˆ¥æ˜¯

1. ä¸€ç­‰å…¬æ°‘å’Œé«˜éšå‡½æ•¸
2. ç´”å‡½æ•¸/é¡ä¼¼æ•¸å­¸å‡½æ•¸
3. å®£å‘Šå¼ç·¨ç¨‹

# **ç‰¹æ€§èˆ‡èªæ³•**

### **1. ç¬¬ä¸€å…¬æ°‘ç‰¹æ€§**

å‡½æ•¸å¼ç·¨ç¨‹ç¬¬ä¸€å€‹ç‰¹æ€§å°±æ˜¯ç•¶å‡½æ•¸å¼æ˜¯è®Šæ•¸ä¸€æ¨£å‚³éã€‚ä¾‹å¦‚ä»¥ä¸‹çš„ä¾‹å­

    auto sum = [](auto x, auto y){
    		auto sum = x + y;
    		return sum;
    };
    int main(){
    	auto sums = sumOf(1,2);
    }

### **2. é«˜éšå‡½æ•¸ç‰¹æ€§**

å¯ä»¥ç•¶å‡½æ•¸å¼æ˜¯åƒæ•¸å‚³å…¥åˆ°å¦ä¸€å€‹å‡½æ•¸å¼ï¼Œç”šè‡³æ˜¯Vector/Mapç­‰ç­‰ã€‚æ”¹å‹•Day 6çš„å‡½æ•¸å¼ç‚ºä¾‹å­ã€‚

    #include <unordered_map>#include <functional>using namespace std;
    
    auto difference = [](auto x, auto y){ return x-y; };
    auto product = [](auto x, auto y){ return x * y; };
    auto quotient = [](auto x, auto y){ return x/y; };
    auto sum = [](auto x, auto y){ return x + y; };
    
    unordered_map<char, function<double(double,double)>>  calculate = {
        {'+',sum},
        {'-',difference},
        {'*',product},
        {'/',quotient}
    };

### **3. å®£å‘Šå¼ç·¨ç¨‹**

å®£å‘Šå¼ç·¨ç¨‹æ˜¯è¼ƒç‚ºæŠ½è±¡çš„ç¨‹å¼ç¢¼ï¼Œæè¿°è©²åœ¨å“ªåšä»€éº¼ä»¥åŠè³‡æ–™æµç¨‹ï¼Œè€Œä¸”å¾ˆå°‘ç”¨åˆ°Ifï¼ŒWhileï¼Œfor loopç­‰ç­‰ã€‚ä½ å¯ä»¥å¾ˆå®¹æ˜“çŒœåˆ°ä»–åœ¨åšä»€éº¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¨‹åºã€‚

    int main(){
    	calculate['*'](3.5,2);
    	calculate['/'](9.5,2);
    }

è¼¸å‡º

    7
    4.75

### **4. é«˜éšå‡½æ•¸ï¼ˆäºŒï¼‰**

Lambdaä¹Ÿæ“æœ‰é«˜éšå‡½æ•¸çš„ç¬¬äºŒå€‹ç‰¹æ€§ï¼Œå°±æ˜¯èƒ½è‡ªå·±è¿”å›å‡½æ•¸äº†

    using namespace std;
    
    auto chooseSign = [](char sign){ return calculate[sign]; };
    
    auto equation = [](auto x, auto y,char sign, auto z){
    	auto evaluate = chooseSign(sign);
    	
    	for(auto i = 0;i<2000;i++){
    		if(evaluate(x,y) == z) return x;
    		else if(evaluate(x,y) == z) return -x;
    	}
    	return -1;
    };

### **5. ç´”å‡½æ•¸**

ç´”å‡½æ•¸çš„æ„æ€æ˜¯ï¼Œå°‡ç›¸åŒçš„æ•¸å€¼æ”¾åˆ°å‡½æ•¸è£¡æœƒè¼¸å‡ºä¸€æ¨£çš„çµæœï¼Œå°±åƒæ•¸å­¸å‡½æ•¸ä¸€æ¨£ã€‚åœ¨C++è£¡ï¼Œå¤§éƒ¨åˆ†åŸºæœ¬å‡½æ•¸éƒ½æ˜¯ç´”å‡½æ•¸ï¼ŒåŒ…æ‹¬Day 6çš„å‡½æ•¸å’Œä»Šæ—¥çš„æ‰€æœ‰å‡½æ•¸ã€‚

å¥½äº†ï¼Œå…¶å¯¦å‡½æ•¸å¼ç·¨ç¨‹å·²ç¶“è¬›å®Œäº†...